const ctx=document.getElementById('myChart').getContext('2d'),countryIdElement=location.href,countryId=countryIdElement.split('/')[4],loadingContainer=document.getElementById('loading-container');async function getCountries(){loadingContainer.classList.add('active');try{const c=await fetch('/countries'),d=await c.json(),e=d.find(g=>{return g._id===countryId});sortByBeersAmount(d);const f=d.filter((g,h)=>{if(5>=h&&g!==e)return g});-1===f.indexOf(e)?f.unshift(e):0!==d.indexOf(e)&&f.unshift(d[d.indexOf(e)]),createChart(f)}catch(c){console.log(c)}}function sortByBeersAmount(c){return c.sort((d,e)=>{return d.beers.length>e.beers.length?-1:d.beers.length<e.beers.length?1:0})}function createChart(c){new Chart(ctx,{type:'bar',data:{labels:[c[0].name,c[1].name,c[2].name,c[3].name,c[4].name],datasets:[{data:[c[0].beers.length,c[1].beers.length,c[2].beers.length,c[3].beers.length,c[4].beers.length],backgroundColor:['rgba(54, 162, 235, 0.2)'],borderColor:['rgba(54, 162, 235, 1)'],hoverBackgroundColor:'rgba(54, 162, 235, 0.5)',borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},legend:{display:!1}}});loadingContainer.classList.remove('active')}getCountries();