const loginForm=document.forms.login,loginBtn=document.getElementById('login-btn'),username=document.getElementById('username'),password=document.getElementById('password'),passwordMsg=document.getElementById('password-msg'),usernameMsg=document.getElementById('username-msg');loginForm.addEventListener('submit',async function(a){a.preventDefault(),loginBtn.classList.add('disabled'),password.className='validate';try{const b=await fetch('/login',{headers:new Headers({'Content-Type':'application/json'}),method:'post',credentials:'same-origin',body:JSON.stringify({username:username.value,password:password.value})}),c=await b.json();c&&(c.active&&'P'===c.message[0]?(password.className='validate invalid',passwordMsg.attributes[2].nodeValue=c.message,loginBtn.classList.remove('disabled')):!1===c.active?(username.className='validate invalid',usernameMsg.attributes[2].nodeValue=c.message,loginBtn.classList.remove('disabled')):'C'===c.message[0]?(username.className='validate invalid',usernameMsg.attributes[2].nodeValue=`${c.message} '${username.value}'`,loginBtn.classList.remove('disabled')):location.href='/')}catch(b){console.log(b)}});